version: '1.0'

steps:
  clone:
    title: "Clonando el repositorio"
    type: git-clone
    repo: '${{CF_REPO_OWNER}}/${{CF_REPO_NAME}}'
    revision: '${{CF_REVISION}}'

  install_go:
    title: "Instalar Go"
    type: freestyle
    image: golang:latest
    commands:
      - wget -q https://go.dev/dl/go1.20.linux-amd64.tar.gz  # Cambia la versión según sea necesario
      - tar -C /usr/local -xzf go1.20.linux-amd64.tar.gz
      - echo 'export PATH=$PATH:/usr/local/go/bin' >> $BASH_ENV
      - source $BASH_ENV

  run_tests:
    title: "Ejecutar pruebas"
    type: freestyle
    image: golang:latest
    commands:
      - go test ./...  # Ejecuta todas las pruebas en el paquete actual

